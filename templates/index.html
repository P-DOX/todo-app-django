<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Tasks â€” Todo App</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
  <main class="container">
    <!-- Header with Logo and Auth -->
    <header class="app-header">
      <div class="header-left">
        <div class="app-logo">
          <span class="logo-icon">âœ“</span>
          <h1 class="app-title"><span style="font-size: 1.4em; margin-right: 8px;">âœ…</span>Todo App</h1>
        </div>
      </div>
      <div id="auth-area" class="auth-area">
        <a href="{% url 'login' %}" id="link-login" class="auth-link">Login</a>
        <a href="{% url 'register' %}" id="link-register" class="auth-link">Register</a>
      </div>
    </header>

    <!-- Level Switcher -->
    <div class="level-switcher" role="tablist" aria-label="Task Levels">
      <button class="level-btn active" data-level="daily" role="tab" aria-selected="true">
        <span class="level-icon">ğŸ“…</span>
        <span class="level-name">Daily</span>
      </button>
      <button class="level-btn" data-level="weekly" role="tab" aria-selected="false">
        <span class="level-icon">ğŸ“Š</span>
        <span class="level-name">Weekly</span>
      </button>
      <button class="level-btn" data-level="monthly" role="tab" aria-selected="false">
        <span class="level-icon">ğŸ“†</span>
        <span class="level-name">Monthly</span>
      </button>
      <button class="level-btn" data-level="yearly" role="tab" aria-selected="false">
        <span class="level-icon">ğŸ¯</span>
        <span class="level-name">Yearly</span>
      </button>
    </div>

    <div class="app-layout">
      <!-- Sidebar: Calendar -->
      <aside class="calendar-sidebar" aria-label="Calendar">
        <div class="sidebar-header">
          <h2 class="sidebar-title">Calendar</h2>
        </div>
        
        <div class="calendar-container">
          <div class="calendar-header">
            <button id="prev-month" class="month-nav-btn" aria-label="Previous month">â—€</button>
            <div id="month-label" class="month-label">Month</div>
            <button id="next-month" class="month-nav-btn" aria-label="Next month">â–¶</button>
          </div>
          <div class="weekdays">
            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
          </div>
          <div id="days" class="calendar-grid" role="grid" aria-label="Days"></div>
          <div class="heat-legend" aria-hidden="true">
            <div class="legend-item"><div class="swatch" style="background:transparent"></div><span>0</span></div>
            <div class="legend-item"><div class="swatch" style="background:rgba(22,163,74,0.18)"></div><span>Low</span></div>
            <div class="legend-item"><div class="swatch" style="background:rgba(22,163,74,0.30)"></div><span>High</span></div>
          </div>
        </div>
      </aside>

      <!-- Main Content: Tasks -->
      <section class="tasks-panel">
        <div class="tasks-toolbar">
          <div class="tabs" role="tablist" aria-label="Todo lists">
            <button class="tab active" data-tab="personal" id="tab-personal">
              <span class="tab-icon">ğŸ‘¤</span>
              <span>Personal</span>
            </button>
            <button class="tab" data-tab="work" id="tab-work">
              <span class="tab-icon">ğŸ’¼</span>
              <span>Work</span>
            </button>
          </div>

          <a class="settings-link" id="admin-link" href="{% url 'admin_page' %}" title="Manage default tasks">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7z" fill="currentColor"/>
              <path d="M19.4 13.3c.03-.33.05-.66.05-1s-.02-.67-.05-1l2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.22l-2.49 1a7.02 7.02 0 0 0-1.73-1L14.5 2.5a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0-.5.5L9.2 5.36c-.62.22-1.2.5-1.73.82l-2.5-1a.5.5 0 0 0-.6.22l-2 3.46a.5.5 0 0 0 .12.64L4.6 11.3c-.03.33-.05.66-.05 1s.02.67.05 1L2.49 14.95a.5.5 0 0 0-.12.64l2 3.46c.14.25.45.36.7.28l2.5-1c.53.32 1.11.6 1.73.82L10 21.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5l.57-2.86c.62-.22 1.2-.5 1.73-.82l2.5 1c.25.08.56-.03.7-.28l2-3.46a.5.5 0 0 0-.12-.64L19.4 13.3z" fill="currentColor"/>
            </svg>
            <span>Create Default Tasks</span>
          </a>
        </div>

        <div class="week-controls">
          <button id="prev-week" class="week-nav-btn" aria-label="Previous week">â—€</button>
          <div class="week-tabs" id="week-tabs" role="tablist" aria-label="Week days"></div>
          <button id="next-week" class="week-nav-btn" aria-label="Next week">â–¶</button>
        </div>

        <div class="selected-date-card">
          <span class="date-icon">ğŸ“†</span>
          <span id="selected-date-label" class="selected-date">Selected Date</span>
        </div>

        <form id="task-form" class="task-form" aria-label="Add new task">
          <div class="input-wrapper">
            <input id="task-input" type="text" placeholder="What needs to be done?" aria-label="Task description" required>
            <button type="submit" class="add-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5v14m-7-7h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span>Add Task</span>
            </button>
          </div>
        </form>

        <div class="controls">
          <div class="filters" role="tablist" aria-label="Filter tasks">
            <button class="filter active" data-filter="all">
              <span class="filter-icon">ğŸ“‹</span>
              <span>All</span>
            </button>
            <button class="filter" data-filter="active">
              <span class="filter-icon">â³</span>
              <span>Active</span>
            </button>
            <button class="filter" data-filter="completed">
              <span class="filter-icon">âœ…</span>
              <span>Completed</span>
            </button>
          </div>
          <button id="clear-completed" class="clear-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Clear Completed</span>
          </button>
        </div>

        <ul id="task-list" class="task-list" aria-live="polite"></ul>
        
        <div class="task-footer">
          <p class="hint">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <path d="M12 16v-4m0-4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Tasks are automatically saved and synced
          </p>
        </div>

        <!-- Weekly Tasks Container -->
        <div id="weekly-container" style="display: none;"></div>

        <!-- Monthly Tasks Container -->
        <div id="monthly-container" style="display: none;"></div>

        <!-- Yearly Tasks Container -->
        <div id="yearly-container" style="display: none;"></div>
      </section>
    </div>
  </main>

  <script src="{% static 'js/auth.js' %}?v=3.0"></script>
  <script src="{% static 'js/app.js' %}?v=3.0"></script>
</body>
</html>
